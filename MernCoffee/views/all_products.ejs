<%- include('./_layouts/header') %>
<link rel="stylesheet" href="/css/all_products.css">
<div class="title">
    <h1>All products</h1>
</div>

<div class="all_product-container">
    <div class="sidebar">
        <div class="filter">
            <button class="filter-btn active" onclick="filterSelection('all')">All</button>
            <button class="filter-btn" onclick="filterSelection('coffee')">Coffee</button>
            <button class="filter-btn" onclick="filterSelection('other')">Other</button>      
        </div>
    </div>
    <div class="products-list">
        
        <% products.forEach(function(p){ %>
                <div class="product <%= p.category %>">
                    <div class="product-card">
                        <div class="img-container">
                            <a class="pa" href="/products/<%= p.category %>/<%= p.slug %>"></a>
                                <img class="pimage" src="/product_images/<%= p._id %>/<%= p.image %>" alt="<%= p.title %>">
                            </a>
                        </div>
                        <div class="description">
                            <div class="product-name">
                                <h3><%= p.title %></h3>
                            </div>
                            <div class="product-content">
                                <h4><%= parseFloat(p.price).toFixed(0) %>Ä‘</h4>
                                <a class="vd" href="/products/<%= p.category %>/<%= p.slug %>">View Details</a>
                            </div>
                        </div>
                    </div>
                </div>

            <% }); %>
        
    </div>
</div>

<script>
    filterSelection("all")
    function filterSelection(c) {
    var x, i;
    x = document.getElementsByClassName("product");
    if (c == "all") c = "";
    // Add the "show" class (display:block) to the filtered elements, and remove the "show" class from the elements that are not selected
    for (i = 0; i < x.length; i++) {
        x[i].classList.remove("show");
        console.log(x[i].className.indexOf(c) > -1)
        if (x[i].className.indexOf(c) > -1) x[i].classList.add("show");
    }
    }

    // Add active class to the current control button (highlight it)
    var btns = document.getElementsByClassName("filter-btn");
    for (var i = 0; i < btns.length; i++) {
    btns[i].addEventListener("click", function() {
        var current = document.getElementsByClassName("active");
        current[0].classList.remove("active");
        this.classList.add("active");
    });
    }
</script>

<%- include('./_layouts/footer') %>